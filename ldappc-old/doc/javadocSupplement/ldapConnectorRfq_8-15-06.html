<html><head><title>LDAP Connector RFQ v02</title></head><body><p align="right">tjb 15 aug 2006 </p>
<h1 align="center">Request for Quote - LDAP Connector for Grouper &amp; Signet</h1>
<h2>1. General Background  &amp; Statement of Work Requested </h2>
<p>Grouper and Signet are products of the Internet2 Middleware
Initiative that embody part of a distributed authority management
infrastructure. Grouper manages groups and memberships in a relational
database called the Groups Registry. Signet manages privileges in a
relational database called the Privileges Registry. Both tools rely on
a technology called the Subject API to integrate with existing sources
of identities whose memberships or privileges are to be managed.</p>
<p>The Grouper &amp; Signet Projects have not yet produced a
significant part of the distributed access management infrastructure:
tools that provision group, membership, and privilege information to
repositories outside of the Groups and Privileges Registries. This RFQ
is for a tool that will provision group, membership, and privilege
information to an LDAP directory. </p>
<p align="left">The following diagram illustrates how Grouper &amp;
Signet generally integrate with existing Identity Management
infrastructure and Applications. The yellow "LDAP Provisioning
Connector" elements indicate the functional roles of the tool to be
built. </p>
<p align="center"><img src="ldapConnectorRfq_8-15-06_files/signet_grouper_s4-sml.jpg" alt="sig-gro-integration" height="554" width="715"></p>
<p align="left">Further documentation for Grouper, Signet, the Subject
API, and definitions of specifically related terms used below can be
found at <a href="http://grouper.internet2.edu/">http://grouper.internet2.edu</a> and <a href="http://signet.internet2.edu/">http://signet.internet2.edu</a>. </p>
<h2 align="left">2. Deliverables</h2>
<ol>
  <li>A Java API that implements the API  functional specifications listed below, together with source code and javadoc. </li>
  <li>A
Java program that meets the Program functional specifications listed
below and uses the API to provision group, membership, and privilege
information to an LDAP directory. </li>
  <li>Example configuration file(s)  that produces a functioning instance of the tool.</li>
  <li>Developer's guide:   essential information for developers of applications using the API.</li>
  <li>Configuration documentation: a concise declaration of how to configure the API and the Program. </li>
</ol>
<p>The Program is a thin wrapper around the API. The API should
encapsulate all functionality needed by any caller to conduct LDAP
provisioning operations. </p>
<p>The configuration file may be properties- or XML-style, with XML
favored only if the configuration semantics are complex enough to
warrant it. </p>
<p>For clarity and definiteness, we'll call the Program "auth2ldap" and the API "Auth2LDAP API". </p>
<p>All java classes should be constructed within the '<strong>edu.internet2.middleware.auth2ldap</strong>' namespace.</p>
<h3>2.1. Deliverable versions </h3>
<p>As time is of the essence, specifications below are identified as
"v0.5" or "v1.0" to identify those that should be implemented sooner
and those that can wait until later. We request separate quotes and
timeframes for version 0.5 and for the additional effort to extend v0.5
to v1.0.</p>
<h2 align="left">3.  Specifications</h2>
<h3 align="left">3.1. Program parameters</h3>
<p align="left">The Program can be  started from the command line with the following parameters:</p>
<pre align="left">-subject        The SubjectId used to establish Grouper API and Signet API sessions 
-groups         (Optional) When present, group information will be provisioned
-memberships    (Optional) When present, membership information will be provisioned
-privileges     (Optional) When present, privilege information will be provisioned
-lastModifyTime (Optional) DateTime representation to select only objects changed since then
-interval       (Optional) Number of seconds between polling intervals
</pre>

<p>When the "-groups" argument is present, Grouper group information
will be provisioned into LDAP group entries per declarations in the
configuration file. </p>
<p>When the "-memberships" argument is present, Grouper group
membership information will be provisioned into LDAP entries
corresponding to members per declarations in the configuration file. </p>
<p>When the "-permissions" argument is present, Signet permission
information will be provisioned into LDAP entries corresponding to
privilegees per declarations in the configuration file. </p>
<p>If the "-interval" parameter is present, the Program will continue
to operate until killed; otherwise, it performs one provisioning cycle
and terminates. </p>
<table border="1" width="200">
  <tbody><tr>
    <td>v0.5</td>
    <td>v1.0</td>
  </tr>
  <tr>
    <td>-subject</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>-groups</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>-memberships</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><p>-privileges</p>    </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>-lastModifyTime</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>-interval</td>
  </tr>
</tbody></table>
<h3>3.2. Configuration file location </h3>
<p>Configuration files for the Program and API will be collocated with
those for the Grouper and Signet API instances incorporated into the
Auth2LDAP API. </p>
<p>The configuration file will be located in the same directory as the configuration files for the Grouper and Signet APIs. </p>
<h3>3.2. Logging</h3>
<p>Both Program and API will use log4j to manage logging using good
practice for choice of logged events and correspondence with logging
levels. </p>
<h3><strong>3.3. Configurable selection of groups and memberships to be provisioned</strong></h3>
<p>The Auth2LDAP API will use the Grouper API to obtain group and
membership information to be provisioned. Three different means of
specifying which groups and/or memberships are selected for
provisioning will be supported, as follows. </p>
<ul>
  <li>[v0.5] By the Subject the provisioning tool is running as.</li>
  <li>[v0.5] By last modify time.</li>
  <li>[v1.0] By zero or more  configured queries implemented by the Grouper API.</li>
</ul>
<p><strong></strong><strong>By Subject</strong> - The Grouper API
implements its internal security in terms of which Subject is accessing
the API. With this selection method, all groups to which the configured
Subject has READ privilege are selected for provisioning, together with
the memberships of those groups. This selection is obtained by means of
the AccessAdapter.getGroupsWhereSubjectHasPriv()
method in the Grouper API.</p>
<p><strong>By Last Modify Time</strong> - The upcoming v1.1 release of
the Grouper API will have a query filter to select groups by their
lastModifyTime operational attribute. Each polling cycle, all groups
whose lastModifyTime is later than the time of the start of the
previous polling cycle are selected for provisioning, together with
their memberships. The lastModifyTime comparative value for the initial
polling cycle is the value of the auth2ldap program's "â&#8364;&#8216;lastModifyTime"
parameter. Implementation of this specification is of course dependent
on the lastModifyTime query filter being checked into the Grouper cvs
in time. </p>
<p><strong>By Configured Queries</strong> - The Grouper API implements
a GrouperQuery class which can be used to select groups satisfying
various criteria. The Auth2LDAP API configuration file will contain
declarations for zero or more queries to select sets of groups. The
union of all groups selected by these queries, and their memberships,
are subject to provisioning. The set of queries to be represented in
the configuration file should include the following:</p>
<ul>
  <li>All groups subordinate to a given naming stem and modified since Last Modify Time.</li>
  <li>All groups for which a configured attribute contains a configured string and modified since Last Modify Time.</li>
</ul>
<h3>3.4. Configurable selection of privileges to be provisioned </h3>
<p><strong> </strong>The Auth2LDAP API will use the Signet API to
obtain privilege information to be provisioned. Two means of specifying
which privileges are selected for provisioning will be supported, as
follows. </p>
<ul>
  <li>[v0.5] All active permissions. </li>
  <li>[v1.0] By permission characteristics.</li>
</ul>
<p><strong>All Active Permissions</strong> - The Signet API
Signet.getPrivilegedSubjects() method lists all Subjects that have been
assigned privileges. For each selected Subject the
PermissionsXML.generateXML() method produces an XML document containing
all active permissions assigned to the Subject. These are provisioned. </p>
<p><strong>By Permission Characteristics</strong> - For each Subject
that has been assigned privileges, the
PrivilegedSubject.getPrivileges() method lists the Privileges held by
the Subject. For each Privilege the Privilege.getPermission() method
returns the corresponding Permission object, and the
Permission.getCreateDateTime() and Permission.getStatus() methods
return the status and creation time of the permission. Those with
status other than ACTIVE or whose create time is prior to the time of
the start of the previous polling cycle are REJECTED for provisioning.
The lastModifyTime comparative value for the initial polling cycle is
the value of the auth2ldap program's "â&#8364;&#8216;lastModifyTime" parameter. Other
characteristics of each Permission object are checked against
additional declarations in the Auth2LDAP configuration file to further
determine whether it is to be selected for provisioning. </p>
<h3>3.5. Identification of LDAP entries to be provisioned with membership or privilege information </h3>
<p>Members of Grouper groups and grantees of Signet privileges are
references to abstract Subject objects. The Subject API's Source and
Subject interfaces are used to construct Subject objects from their
native representation in a site's back-end identity sources. There can
be one or more sources, identified by a Subject's sourceId, in play in
a given instance, and Subject objects from different sources can have
different sets of attributes associated with them. But every source
must produce Subjects with one or more "identifying" attributes such as
loginIds or UUIDs, used to uniquely identify the subject in some
context. </p>
<p>We're concerned with identifying subjects in the context of the LDAP
directory being provisioned. The Auth2LDAP configuration file must
contain a declaration for each Subject source of </p>
<ol>
  <li>which identifying subject attribute will be used for subjects from that source, and </li>
  <li>an
LDAP search filter involving the declared identifier used to uniquely
identify the LDAP entry corresponding to a subject from this source.</li>
</ol>
<p>This is a v0.5 requirement. </p>
<h3>3.6. Identification of LDAP entries to be provisioned with group information </h3>
<p>Grouper groups have several "naming attributes" that can be used
either to form a DN of a corresponding LDAP group object or to search
for an existing LDAP group object to which the Grouper group
corresponds. Three approaches for identifying LDAP groups from Grouper
groups are to be supported:</p>
<ol>
  <li>[v0.5] Flat.</li>
  <li>[v1.0] Bushy.</li>
</ol>
<p><strong>Flat</strong> - All groups being provisioned by Auth2LDAP
will reside in a single OU whose DN is declared in the Auth2LDAP
configuration file. The RDN attribute is declared in the Auth2LDAP
configuration file (examples: "cn", "exampleEduGroupId") and the RDN
value for each group is equal to either the group's "name" or "id"
attribute, as declared in the Auth2LDAP configuration file. If the
identified LDAP group entry does not exist, it is created by Auth2LDAP.
If an LDAP group exists in this OU that is not associated with a group
in the Groups Registry, it is deleted by Auth2LDAP. </p>
<p><strong>Bushy</strong> - Each Grouper group's corresponding LDAP OU
is determined by the group's "stem" attribute. A group's stem value is
translated into a DN for the containing OU by starting with a
configured DN for the root of an LDAP OU hierarchy containing group
objects and using the stem elements (delimited by ":" separator
characters) to form successive RDNs of OU down the hierarchy. If the
identified LDAP group entry does not exist, it is created by Auth2LDAP.
If an LDAP group exists in this OU that is not associated with a group
in the Groups Registry, it is deleted by Auth2LDAP. For example, with a
configured hierarchy root DN of "ou=groups,dc=example,dc=edu", a
Grouper group with stem "fin_depts:44:550" will be located in the OU
whose DN is "ou=550,ou=44,ou=fin_depts,ou=groups,dc=example,dc=edu".
The RDN is to be formed using the group's "extension" attribute. </p>
<h3><strong>3.7. Configuration of provisioned group and membership LDAP schema</strong></h3>
<p>The LDAP entries of groups must have their membership reflect the
Grouper group's membership, and LDAP entries for members must list
their group memberships in accord with their status in the Groups
Registry. Grouper group attributes may optionally be reflected in LDAP
group attributes or in LDAP entries of corresponding members. And LDAP
group object DN-valued membership attributes, though not managed within
the Groups Registry, should optionally also be maintained by the
Auth2LDAP API. </p>
<ol>
  <li>[v0.5] LDAP membership attributes for members and for groups.</li>
  <li>[v1.0] Mapping Grouper group attributes to LDAP group attributes. </li>
  <li>[v1.0] Mapping Grouper group attributes to LDAP member attributes. </li>
  <li>[v1.0] Maintaining LDAP DN references to groups and members. </li>
</ol>
<p> <strong>LDAP membership attributes for members and for groups</strong>
- The Auth2LDAP configuration file will declare whether LDAP entries
corresponding to group members will have the groups they belong to
listed in an LDAP attribute, which attribute to list them in, and which
group naming attribute to use. Auth2LDAP must add values to and/or
remove values from this attribute so that the resulting set of values
exactly matches the set of Group Registry memberships held by the
corresponding Subject. </p>
<p><strong>Mapping Grouper group attributes to LDAP group attributes</strong>
- The Auth2LDAP configuration file should declare if and how basic or
custom Grouper group attributes are mapped to attributes of LDAP
groups. </p>
<p><strong>Mapping Grouper group attributes to LDAP member attributes</strong>
- The Auth2LDAP configuration file should declare if and how basic or
custom Grouper group attributes are mapped to attributes of the LDAP
entries corresponding to group members.</p>
<p><strong>Maintaining LDAP DN references to groups and members</strong>
- The Auth2LDAP configuration file should declare if LDAP group objects
being provisioned should have their DN-valued membership attributes
maintained, and what the membership attribute name is. If so,Auth2LDAP
must add DN values to and/or remove DN values from this attribute so
that the resulting set of values exactly matches the set of Group
Registry memberships held by the corresponding Subjects. </p>
<h3>3.8. <strong>Configuration of   LDAP schema for permissions</strong></h3>
<p>Signet privileges are represented as "permissions documents", an XML
representation of a set of "permissions". The eduPermission objectclass
defines an LDAP representation of Signet permissions. An alternative to
this representation is to map each permission into a string format. The
resulting strings are stored in a specified attribute in the
privilegee's LDAP entry. </p>
<ol>
  <li>[v0.5] Provision Signet permissions as eduPermission objects.</li>
  <li>[v1.0] Provision Signet permissions as strings.</li>
</ol>
<p><strong>Provision Signet permissions as eduPermission objects</strong>
- If so directed by the Auth2LDAP configuration file, permissions will
be provisioned as entries subordinate to the grantee's LDAP entry
according to the draft eduPermission objectclass specification
(attached). Auth2LDAP should add and/or remove subordinate
eduPermission entries so that the resulting set of subordinate entries
exactly matches the set of Privilege Registry permissions help by the
corresponding Subject.</p>
<p><strong>Provision Signet permissions as strings</strong> - If so
directed by the Auth2LDAP configuration file, permissions will be
provisioned as (multiple) string values of an attribute named in the
configuration file. Each permission will be mapped to a string thusly:</p>
<blockquote>
  <p>&lt;prefix&gt;:&lt;SubsystemId&gt;:&lt;PermissionId&gt;:&lt;ScopeId&gt;:&lt;LimitId&gt;:&lt;Limit&gt; </p>
</blockquote>
<p>where &lt;prefix&gt; is a string declared in the Auth2LDAP
configuration file and the other values are as obtained from the
Permission object or permissions XML document for the subject in whose
LDAP entry this is being provisioned. Permissions with multiple Limits
will require several such values to be created and provisioned, one per
Limit value. Auth2LDAP should add and/or remove values from this
attribute so that the resulting set of values exactly matches the set
of Privilege Registry permissions help by the corresponding Subject.</p>
<h3><strong>3.9. Declaration of typical LDAP parameters</strong></h3>
<p>The usual parameters necessary to establish a JNDI context should be
declared in the Auth2LDAP configuration file. These are
INITIAL_CONTEXT_FACTORY, PROVIDER_URL, SECURITY_AUTHENTICATION,
SECURITY_PRINCIPAL, and SECURITY_CREDENTIALS.</p>
<h3>3.10. Use of Java Interfaces</h3>
<p>The Auth2LDAP API to be developed will hopefully serve as a starting
point for others who wish to extend or modify it in some way to meet
local needs. We wish the code to be designed to make use of Java
interfaces at reasonable points to enable others to plug their own
implementations in, thus minimizing the amount of additional coding
work and degree of branching of the original code base needed to meet
local needs. The functional areas specified by sections 3.3, 3.4, 3.6,
3.7, and 3.8 should be considered as candidates for a "pluggable"
approach, in which the specifications are met by classes that implement
Java interfaces that define abstract capabilities in each of these
functional areas. </p>
<h3>3.10. Development requirements</h3>
<ol>
  <li>Access to a cvs code repository will be provided. </li>
  <li>Use of particular versions of certain  3<sup>rd</sup> party libraries is required. Access to a cvs project housing this set of  3<sup>rd</sup> party libraries will be provided. </li>
</ol>
<h1>Attachment - eduPermission Objectclass</h1>
<p><strong>NOTE</strong>: The following OID has been registered for the eduPermission objectclass: <strong>1.3.6.1.4.1.5923.1.8</strong></p>
<p><strong></strong>draft-barton-eduPermission-oc-01<br>
  Tom Barton<br>
  29 February 2006<br>
  Comments to: tbarton at uchicago dot edu<br>
  expires 29 August 2006<br>
</p>
<p>eduPermission Object Class<br>
</p>
<p>Abstract: An LDAP objectclass is defined to faciliate the expression of<br>
  permissions managed by the Signet Privilege Management Toolkit(TM).<br>
</p>
<p>1. Introduction</p>
<p>The Signet Privilege Management Toolkit ([1]) produces XML documents that<br>
  express a set of permissions assigned to each of a set of subjects. These<br>
  documents are used by "provisioning connectors" or systems integration<br>
  software to map permissions into suitable representations in application<br>
  contexts.</p>
<p>It is convenient for some or all permissions to be presented in an LDAP<br>
  directory to support LDAP-enabled applications, or to enable an<br>
  LDAP-integrated SAML Attribute Authority to provide corresponding attribute<br>
  assertions to SAML Service Providers, in accord with its operational policy.</p>
<p>This document presents a specification for representing Signet permissions in<br>
  LDAP. It takes the approach of attaching a subentry representing (a portion<br>
  of) each permission to the entry granted the permission. How that entry is<br>
  identified is outside of the scope of this document (although it's a<br>
  straightforward application of the Subject API that's included with the<br>
  Signet Privilege Management Toolkit).</p>
<p>The objectclass for such subentries is specified in section 2. </p>
<p>The RDN of each eduPermission object is the triple of<br>
  eduPermissionSubsytemId, eduPermissionId, and eduPermissionLimitId. One<br>
  subentry instance is emplaced for each unique combination of these three<br>
  attributes in a Signet permissions document scoped to the subject to whom the<br>
  permissions are being granted.<br>
</p>
<p>2. eduPermission Objectclass</p>
<p>&lt;need to insert a representation of the permissions doc element structure,<br>
  including cardinality, and talk about how it's mapped to this objectclass&gt;</p>
<p>The OIDs specified below are placeholders for now. The MACE Directories<br>
  Working Group will need to replace '123456789' with a suitable value.</p>
<p>( 1.3.6.1.4.1.5923.1.1.123456789<br>
  NAME 'eduPermission'<br>
  SUP top <br>
  STRUCTURAL <br>
  MUST ( eduPermissionSubsytemId $ eduPermissionId $ eduPermissionLimitId )<br>
  MAY ( eduPermissionScopeId &amp; eduPermissionScopeName $ eduPermissionLimit )<br>
  )</p>
<p>( 1.3.6.1.4.1.5923.1.1.123456789.1.1<br>
  NAME 'eduPermissionId'<br>
  DESC 'The permissionId of the permission'<br>
  EQUALITY caseIgnoreMatch<br>
  SYNTAX '1.3.6.1.4.1.1466.115.121.1.15'<br>
  SINGLE-VALUE )</p>
<p>( 1.3.6.1.4.1.5923.1.1.123456789.1.2<br>
  NAME 'eduPermissionSubsystemId'<br>
  DESC 'The identifier of the subsystem within which this permission is defined'<br>
  EQUALITY caseIgnoreMatch<br>
  SYNTAX '1.3.6.1.4.1.1466.115.121.1.15'<br>
  SINGLE-VALUE )</p>
<p>( 1.3.6.1.4.1.5923.1.1.123456789.1.3<br>
  NAME 'eduPermissionScopeId'<br>
  DESC 'The identifier of the scope within which this permission is defined'<br>
  EQUALITY caseIgnoreMatch<br>
  SYNTAX '1.3.6.1.4.1.1466.115.121.1.15'<br>
  SINGLE-VALUE )</p>
<p>( 1.3.6.1.4.1.5923.1.1.123456789.1.4<br>
  NAME 'eduPermissionScopeName'<br>
  DESC 'The name of the scope within which this permission is defined'<br>
  EQUALITY caseIgnoreMatch<br>
  SYNTAX '1.3.6.1.4.1.1466.115.121.1.15'<br>
  SINGLE-VALUE )</p>
<p>( 1.3.6.1.4.1.5923.1.1.123456789.1.5<br>
  NAME 'eduPermissionLimitId'<br>
  DESC 'A limitId associated with the permission'<br>
  EQUALITY caseIgnoreMatch<br>
  SYNTAX '1.3.6.1.4.1.1466.115.121.1.15' <br>
  SINGLE-VALUE )</p>
<p>( 1.3.6.1.4.1.5923.1.1.123456789.1.6<br>
  NAME 'eduPermissionLimit'<br>
  DESC 'A limit associated with the permission'<br>
  EQUALITY caseIgnoreMatch<br>
  SYNTAX '1.3.6.1.4.1.1466.115.121.1.15' )<br>
</p>
<p>3. References</p>
<p>[1] http://signet.internet2.edu</p>
<p>&nbsp;</p>
<pre>&nbsp; </pre>
</body></html>