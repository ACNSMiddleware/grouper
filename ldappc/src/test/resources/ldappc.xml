<?xml version="1.0" encoding="utf-8"?>

<!-- 
    * This file contains data for testing Ldappc.
    *
    * See ldappcTemplate.xml for documentation regarding how to use these
    * elements.
-->

<ldappc>
  <grouper>
    <group-queries>
      <subordinate-stem-queries>
        <stem-list>
          <stem>qsuob</stem>
        </stem-list>
      </subordinate-stem-queries>
      <!--
      <attribute-matching-queries>
        <attribute-list>
          <attribute name="attribute" value="value" />
        </attribute-list>
      </attribute-matching-queries>
      -->
    </group-queries>
    <groups structure="flat"
      root-dn="ou=testgrouper,dc=example,dc=edu"
      ldap-object-class="groupOfNames"
      ldap-rdn-attribute="cn" grouper-attribute="name" >
      <group-members-dn-list list-object-class="groupOfNames" list-attribute="member" list-empty-value=""/>
      <group-members-name-list list-object-class="eduMember" list-attribute="hasMember" >
        <source-subject-name-mapping>
          <source-subject-name-map source="qsuob" subject-attribute="LOGINID" />
          <source-subject-name-map source="g:gsa" subject-attribute="name" />
        </source-subject-name-mapping>
      </group-members-name-list>
      <!--
      <group-attribute-mapping ldap-object-class="">
        <group-attribute-map group-attribute="xxxx" ldap-attribute="yyyy" />
      </group-attribute-mapping>
      -->
    </groups>
    <memberships>
      <member-groups-list 
        list-object-class="eduMember" 
        list-attribute="isMemberOf"
        naming-attribute="name" />
    </memberships>
  </grouper>

  <signet>
    <permissions-listing stored-as="string" 
      string-object-class="eduPerson"
      string-attribute="eduPersonEntitlement"
      string-prefix="urn:mace:example.edu:permission:" />
      <!-- 
      <permissions-queries>
        <subsystem-queries>
          <subsystem-list>
            <subsystem id="" />
          </subsystem-list>
        </subsystem-queries>
        <function-queries>
          <function-list>
            <function id="" />
          </function-list>
        </function-queries>
      </permissions-queries>
      -->
  </signet>

  <source-subject-identifiers>
    <source-subject-identifier source="qsuob" subject-attribute="LOGINID" >
      <ldap-search base="ou=kitn,dc=example,dc=edu" 
        scope="subtree_scope" 
        filter="(uid={0})" />
    </source-subject-identifier>
    <source-subject-identifier source="signet" subject-attribute="LOGINID">
      <ldap-search base="ou=uob,dc=example,dc=edu" 
	scope="subtree_scope" 
	filter="(uid={0})" />
    </source-subject-identifier>
  </source-subject-identifiers>

  <ldap>
    <context>
      <parameter-list>
        <parameter name="initial_context_factory" value="com.sun.jndi.ldap.LdapCtxFactory" />
        <parameter name="provider_url" value="ldap://localhost:10389" />
        <parameter name="security_authentication" value="simple" />
        <parameter name="security_principal" value="uid=admin,ou=system" />
        <parameter name="security_credentials" value="GetFromPropertiesFile" />
      </parameter-list>
    </context>
  </ldap>

</ldappc>
