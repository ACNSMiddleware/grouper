<?xml version="1.0" encoding="UTF-8"?>

<Services xmlns="urn:mace:shibboleth:2.0:services"
          xmlns:attribute-afp="urn:mace:shibboleth:2.0:afp"
          xmlns:attribute-authority="urn:mace:shibboleth:2.0:attribute:authority"
          xmlns:attribute-resolver="urn:mace:shibboleth:2.0:resolver"
          xmlns:resource="urn:mace:shibboleth:2.0:resource"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xmlns:grouper="http://grouper.internet2.edu/shibboleth/2.0"
          xmlns:ldappc="http://grouper.internet2.edu/ldappc"
          xsi:schemaLocation="urn:mace:shibboleth:2.0:services classpath:/schema/shibboleth-2.0-services.xsd 
                              urn:mace:shibboleth:2.0:afp classpath:/schema/shibboleth-2.0-afp.xsd                            
                              urn:mace:shibboleth:2.0:attribute:authority classpath:/schema/shibboleth-2.0-attribute-authority.xsd
                              urn:mace:shibboleth:2.0:resolver classpath:/schema/shibboleth-2.0-attribute-resolver.xsd                              
                              urn:mace:shibboleth:2.0:resource classpath:/schema/shibboleth-2.0-resource.xsd
                              http://grouper.internet2.edu/shibboleth/2.0 classpath:/schema/shibboleth-2.0-grouper.xsd
                              http://grouper.internet2.edu/ldappc classpath:/schema/ldappc.xsd">

  <!-- The attribute resolver id must be grouper.AttributeResolver. -->
  <Service id="grouper.AttributeResolver" xsi:type="attribute-resolver:ShibbolethAttributeResolver">
    <ConfigurationResource file="/test/edu/internet2/middleware/ldappc/spml/notad/ldappc-resolver.xml" xsi:type="resource:ClasspathResource">
      <ResourceFilter xsi:type="grouper:ClasspathPropertyReplacement" xmlns="urn:mace:shibboleth:2.0:resource"
                      propertyFile="/test/edu/internet2/middleware/ldappc/spml/notad/ldappc.test.properties" />
    </ConfigurationResource>
  </Service>

  <!-- The attribute authority id must be grouper.AttributeAuthority. -->
  <Service id="grouper.AttributeAuthority" xsi:type="grouper:SimpleAttributeAuthority" depends-on="grouper.AttributeResolver" resolver="grouper.AttributeResolver" />

  <Service id="ldappc" xsi:type="ldappc:ProvisioningServiceProvider" depends-on="grouper.AttributeAuthority" authority="grouper.AttributeAuthority" logSpml="true">
    <ConfigurationResource file="/test/edu/internet2/middleware/ldappc/spml/notad/ldappc.xml" xsi:type="resource:ClasspathResource">
      <ResourceFilter xsi:type="grouper:ClasspathPropertyReplacement" xmlns="urn:mace:shibboleth:2.0:resource"
                      propertyFile="/test/edu/internet2/middleware/ldappc/spml/notad/ldappc.test.properties" />
    </ConfigurationResource>
  </Service>

  <!-- Reuse the LdapPool from the LdapSourceAdapter whose <id/> in sources.xml matches ldapPoolId. -->
  <Service id="ldap-provider" xsi:type="ldappc:LdapPoolProvider" ldapPoolId="ldap">
    <!-- A <ConfigurationResource/> is required to instantiate the <Service/>, so supply a do-nothing resource. -->
    <ConfigurationResource file="/edu/internet2/middleware/ldappc/util/empty-bean.xml" xsi:type="resource:ClasspathResource" /> 
  </Service>

  <!-- This LdapPoolProvider uses vt-ldap to connect to an LDAP server.
  <ConfigurationResource file="/test/edu/internet2/middleware/ldappc/spml/empty-bean.xml" xsi:type="resource:ClasspathResource" /> 
  <Service id="ldap-provider" xsi:type="ldappc:LdapPoolProvider" ldapPoolId="ldapPool">
    <ConfigurationResource file="/test/edu/internet2/middleware/ldappc/spml/ldappc-ldap.xml" xsi:type="resource:ClasspathResource">
      <ResourceFilter xsi:type="grouper:ClasspathPropertyReplacement" xmlns="urn:mace:shibboleth:2.0:resource"
                      propertyFile="/test/edu/internet2/middleware/ldappc/spml/ldappc.test.properties" />
    </ConfigurationResource>
  </Service>
  -->
 
</Services>