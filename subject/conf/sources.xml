<?xml version="1.0" encoding="utf-8"?>

<!--
Grouper's subject resolver configuration
$Id: sources.xml,v 1.3 2006-03-12 23:42:43 tbarton Exp $
-->

<sources>

  <!-- Group Subject Resolver -->
  <source adapterClass="edu.internet2.middleware.grouper.GrouperSourceAdapter">
    <id>g:gsa</id>
    <name>Grouper: Group Source Adapter</name>
    <type>group</type>
  </source>
  <!-- Group Subject Resolver -->

  <source adapterClass="edu.internet2.middleware.subject.provider.JNDISourceAdapter">
    <id>kitn-person</id>
    <name>KITN People</name>
    <type>person</type>
    <init-param>
      <param-name>INITIAL_CONTEXT_FACTORY</param-name>
      <param-value>com.sun.jndi.ldap.LdapCtxFactory</param-value>
    </init-param>
    <init-param>
      <param-name>PROVIDER_URL</param-name>
      <param-value>ldap://localhost:389</param-value>
    </init-param>
    <init-param>
      <param-name>SECURITY_AUTHENTICATION</param-name>
      <param-value>simple</param-value>
    </init-param>
    <init-param>
      <param-name>SECURITY_PRINCIPAL</param-name>
      <param-value>cn=manager,dc=sgif,dc=org</param-value>
    </init-param>
    <init-param>
      <param-name>SECURITY_CREDENTIALS</param-name>
      <param-value>%PASSWD%</param-value>
    </init-param>
    <init-param>
      <param-name>SubjectID_AttributeType</param-name>
      <param-value>kitnEduPersonRegID</param-value>
    </init-param>
    <init-param>
      <param-name>Name_AttributeType</param-name>
      <param-value>cn</param-value>
    </init-param>
    <init-param>
      <param-name>Description_AttributeType</param-name>
      <param-value>description</param-value>
    </init-param>
    
    <!-- Scope Values can be: OBJECT_SCOPE, ONELEVEL_SCOPE, SUBTREE_SCOPE -->
    <!-- For filter use -->
    <search>
        <searchType>searchSubject</searchType>
        <param>
            <param-name>filter</param-name>
            <param-value>
                (&amp; (kitnEduPersonRegId=%TERM%)(objectclass=kitnEduPerson))
            </param-value>
        </param>
        <param>
            <param-name>scope</param-name>
            <param-value>
                SUBTREE_SCOPE            
            </param-value>
        </param>
        <param>
            <param-name>base</param-name>
            <param-value>
                ou=people,dc=kitn,dc=edu
            </param-value>
        </param>
            
    </search>
    <search>
        <searchType>searchSubjectByIdentifier</searchType>
        <param>
            <param-name>filter</param-name>
            <param-value>
                (&amp; (uid=%TERM%)(objectclass=kitnEduPerson))
            </param-value>
        </param>
        <param>
            <param-name>scope</param-name>
            <param-value>
                SUBTREE_SCOPE            
            </param-value>
        </param>
        <param>
            <param-name>base</param-name>
            <param-value>
                ou=people,dc=kitn,dc=edu
            </param-value>
        </param>
    </search>
    
    <search>
       <searchType>search</searchType>
        <param>
            <param-name>filter</param-name>
            <param-value>
                (&amp;(|(uid=%TERM%)(cn=*%TERM%*)(kitnEduPersonRegId=%TERM%))(objectclass=kitnEduPerson))
            </param-value>
        </param>
        <param>
            <param-name>scope</param-name>
            <param-value>
                SUBTREE_SCOPE            
            </param-value>
        </param>
        <param>
            <param-name>base</param-name>
            <param-value>
                ou=people,dc=kitn,dc=edu
            </param-value>
        </param>
    </search>
   
  </source>

  <source adapterClass="edu.internet2.middleware.subject.provider.JDBCSourceAdapter">
    <id>uob</id>
    <name>UoB Subject Source</name>
    <type>person</type>
    <init-param>
      <param-name>maxActive</param-name>
      <param-value>4</param-value>
    </init-param>
    <init-param>
      <param-name>maxIdle</param-name>
      <param-value>2</param-value>
    </init-param>
    <init-param>
      <param-name>maxWait</param-name>
      <param-value>5</param-value>
    </init-param>
	
    <!--  Database connection properties  -->
    <init-param>
      <param-name>dbDriver</param-name>
      <param-value>org.hsqldb.jdbcDriver</param-value>
    </init-param>
    <init-param>
      <param-name>dbUrl</param-name>
      <param-value>jdbc:hsqldb:hsql://localhost:9002/uob-subjects</param-value>
    </init-param>
    <init-param>
      <param-name>dbUser</param-name>
      <param-value>sa</param-value>
    </init-param>
    <init-param>
      <param-name>dbPwd</param-name>
      <param-value></param-value>
    </init-param>
  </source>

</sources>

