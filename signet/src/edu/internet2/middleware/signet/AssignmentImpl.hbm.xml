<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 2.0//EN"
          "http://hibernate.sourceforge.net/hibernate-mapping-2.0.dtd">
<hibernate-mapping>
	<class
		name="edu.internet2.middleware.signet.AssignmentImpl"
		table="Assignment"
		lazy="true">
		
		<meta attribute="class-description">
			@author Andy Cohen
		</meta>
		
<!--
		NOTE: The following ID declaration, while correct,
		fails on Sybase. See the entire issue at this URL:
		http://opensource.atlassian.com/projects/hibernate/secure/ViewIssue.jspa?key=HB-684
-->
		<id name="id" type="int" column="AssignmentID">
			<generator class="native"/>
		</id>

<!-- 
		NOTE: The following ID declaration must be used with Sybase.
		<id name="id" type="int" unsaved-value="null"> 
       		<column name="AssignmentID" sql-type="numeric(10,0)"/> 
       		<generator class="native"/> 
    	</id>
-->
    	
		<timestamp name="modifyDateTime"/>
		<many-to-one name="grantor" class="edu.internet2.middleware.signet.PrivilegedSubjectImpl" cascade="save-update" not-null="true">
			<column name="grantorID"/>
			<column name="grantorTypeID"/>
		</many-to-one>
		<many-to-one name="grantee" class="edu.internet2.middleware.signet.PrivilegedSubjectImpl" cascade="save-update" not-null="true">
			<column name="granteeID"/>
			<column name="granteeTypeID"/>
		</many-to-one>
		<many-to-one name="subsystem" column="subsystemID" class="edu.internet2.middleware.signet.SubsystemImpl" cascade="save-update" not-null="true"/>
		<many-to-one name="function" column="functionID" class="edu.internet2.middleware.signet.FunctionImpl" cascade="save-update" not-null="true"/>
		<many-to-one name="scope" column="scopeID" class="edu.internet2.middleware.signet.TreeNodeImpl" cascade="save-update" not-null="true"/>
		<property name="status" type="edu.internet2.middleware.signet.StatusType" not-null="true">
			<meta attribute="use-in-tostring">true</meta>
		</property>
		<property
			name="grantable"
			column="canGrant"
			type="boolean"
			not-null="true"/>
		<property
			name="grantOnly"
			type="boolean"
			not-null="true"/>
		<property name="createDateTime" type="timestamp" not-null="true"/>
		<property name="createDbAccount" type="string" not-null="true"/>
		<property name="createUserID" type="string" not-null="false"/>
		<property name="createContext" type="string" not-null="false"/>
		<property name="modifyDbAccount" type="string" not-null="true"/>
		<property name="modifyUserID" type="string" not-null="false"/>
		<property name="modifyContext" type="string" not-null="false"/>
		<property name="comment" type="string" not-null="false"/>
	</class>
</hibernate-mapping>
