<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE struts-config PUBLIC
          "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN"
          "http://struts.apache.org/dtds/struts-config_1_2.dtd">

<struts-config>
  <display-name><![CDATA[
     account maintenance
  ]]>
  </display-name>
    <description><![CDATA[
     Allows the updating of users accounts and subscriptions.
  ]]>
  </description>

  <!-- ========== Form Bean Definitions =================================== -->
  <form-beans>

    <!-- Logon form bean -->
    <form-bean       name="LogonForm"
                     type="org.apache.struts.validator.DynaValidatorForm">
      <form-property name="username" type="java.lang.String"/>
      <form-property name="password" type="java.lang.String"/>
    </form-bean>

    <!-- Subscription form bean -->
    <form-bean      name="SubscriptionForm"
                    type="org.apache.struts.webapp.example.SubscriptionForm"/>
    </form-beans>


  <!-- ========== Global Forward Definitions ============================== -->
  <global-forwards>
    <forward   name="start"              path="/Start.do"/>
    <forward   name="personview"            path="/PersonView.do"/>
    
    <forward   name="welcome"              path="/Welcome.do"/>
    <forward   name="logoff"               path="/Logoff.do"/>
    <forward   name="logon"                path="/Logon.do"/>
    <forward   name="success"              path="/MainMenu.do"/>
  </global-forwards>


  <!-- ========== Action Mapping Definitions ============================== -->
  <action-mappings>

      <!-- Signet start page -->
      <action    path="/Start"
                 type="edu.internet2.middleware.signet.ui.StartAction">
          <forward name="failure" path="/jsp/error.jsp" />
          <forward name="success" path="/jsp/main.jsp" />
          <forward name="demoLogin" path="/DemoLogin.do" />
      </action>
      
      <!-- Signet demo-login page - this page exists only for Signet demo
           installations. In the case of a normal production system, user
           authentication would occur before the "Start" action is accessed.
      -->
      <action
        path="/DemoLogin"
        type="edu.internet2.middleware.signet.ui.DemoLoginAction">
        
        <forward name="failure" path="/jsp/error.jsp" />
        <forward name="success" path="/jsp/demoLogin.jsp" />

      </action>
      
      <!-- Signet demo-login-check - this action exists only for Signet demo
           installations. In the case of a normal production system, user
           authentication would occur before the "Start" action is accessed.
      -->
      <action
        path="/DemoLoginCheck"
        type="edu.internet2.middleware.signet.ui.DemoLoginCheckAction">
        
        <forward name="failure" path="/jsp/demoLoginFailed.jsp" />
        <forward name="success" path="/Start.do" />

      </action>
      
      <!-- Signet demo-logout - this action exists only for Signet demo
           installations. In the case of a normal production system, user
           authentication would occur before the "Start" action is accessed,
           and this action would need to be altered in order to perform some
           installation-specific logout operation.
      -->
      <action
        path="/Logout"
        type="edu.internet2.middleware.signet.ui.DemoLogoutAction">
        
        <forward name="failure" path="/jsp/error.jsp" />
        <forward name="success" path="/Start.do" />

      </action>

      <!-- Signet person-view page -->
      <action    path="/PersonView"
                 type="edu.internet2.middleware.signet.ui.PersonViewAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/jsp/error.jsp" />
          <forward name="success" path="/jsp/main.jsp" />
      </action>

      <!-- Printable Signet person-view page -->
      <action    path="/PersonViewPrint"
                 type="edu.internet2.middleware.signet.ui.PersonViewPrintAction">
          <forward name="failure" path="/jsp/error.jsp" />
          <forward name="success" path="/jsp/personview-print.jsp" />
      </action>

      <!-- Signet function-selection page -->
      <action    path="/Functions"
                 type="edu.internet2.middleware.signet.ui.FunctionsAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/jsp/error.jsp" />
          <forward name="success" path="/jsp/functions.jsp" />
      </action>

      <!-- Signet scope-selection page -->
      <action    path="/OrgBrowse"
                 type="edu.internet2.middleware.signet.ui.OrgBrowseAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/jsp/error.jsp" />
          <forward name="success" path="/jsp/org-browse.jsp" />
      </action>

      <!-- Signet conditions-selection page -->
      <action    path="/Conditions"
                 type="edu.internet2.middleware.signet.ui.ConditionsAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/jsp/error.jsp" />
          <forward name="success" path="/jsp/conditions.jsp" />
      </action>

      <!-- Signet grant-confirmation page -->
      <action    path="/Confirm"
                 type="edu.internet2.middleware.signet.ui.ConfirmAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/jsp/error.jsp" />
          <forward name="success" path="/jsp/confirm.jsp" />
          <forward name="duplicateAssignments" path="/jsp/duplicateAssignments.jsp" />
		  <forward name="dataEntryErrors" path="/jsp/conditions.jsp" />
      </action>

      <!-- Signet grant-proxy-confirmation page -->
      <action    path="/ConfirmProxy"
                 type="edu.internet2.middleware.signet.ui.ConfirmProxyAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/jsp/error.jsp" />
          <forward name="success" path="/jsp/confirmProxy.jsp" />
          <forward name="duplicateAssignments" path="/jsp/duplicateProxies.jsp" />
		  <forward name="dataEntryErrors" path="/jsp/designate.jsp" />
      </action>

      <!-- Signet assignment-details page -->
      <action    path="/Assignment"
                 type="edu.internet2.middleware.signet.ui.AssignmentAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/jsp/error.jsp" />
          <forward name="success" path="/jsp/assignment.jsp" />
      </action>

      <!-- Signet proxy-details page -->
      <action    path="/Proxy"
                 type="edu.internet2.middleware.signet.ui.ProxyAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/jsp/error.jsp" />
          <forward name="success" path="/jsp/proxy.jsp" />
      </action>

      <!-- Signet assignment-revocation action -->
      <action    path="/Revoke"
                 type="edu.internet2.middleware.signet.ui.RevokeAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/jsp/error.jsp" />
          <forward name="success" path="/Start.do" />
      </action>

      <!-- Signet assignment-revocation-and-grant action
		   (for resolving duplicate Assignments)
       -->
      <action    path="/RevokeAndGrant"
                 type="edu.internet2.middleware.signet.ui.RevokeAndGrantAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/jsp/error.jsp" />
          <forward name="success" path="/jsp/confirm.jsp" />
      </action>

      <!-- Signet proxy-revocation-and-grant action
		   (for resolving duplicate Proxies)
       -->
      <action    path="/RevokeAndGrantProxy"
                 type="edu.internet2.middleware.signet.ui.RevokeAndGrantProxyAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/jsp/error.jsp" />
          <forward name="success" path="/jsp/confirmProxy.jsp" />
      </action>

      <!-- Signet page for display of raw Privileges XML
       -->
      <action    path="/PrivilegesXML"
                 type="edu.internet2.middleware.signet.ui.PermissionsXMLAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/jsp/error.jsp" />
          <forward name="success" path="/privilegesXML" />
      </action>

      <!-- Signet designated-driver page
       -->
      <action    path="/Designate"
                 type="edu.internet2.middleware.signet.ui.DesignateAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/jsp/error.jsp" />
          <forward name="success" path="/jsp/designate.jsp" />
      </action>

      <!-- Choosing another user to "act as"
       -->
      <action    path="/ActAs"
                 type="edu.internet2.middleware.signet.ui.ActAsAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/jsp/error.jsp" />
          <forward name="success" path="/Start.do" />
      </action>

      <!-- Signet not-yet-implemented page -->
      <action    path="/NotYetImplemented"
                 type="edu.internet2.middleware.signet.ui.NotYetImplementedAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/jsp/error.jsp" />
          <forward name="success" path="/jsp/not-yet-implemented.jsp" />
      </action>

  </action-mappings>

  <!-- ========== Controller Configuration ================================ -->

  <controller pagePattern="$M$P" inputForward="true" />
    <!-- pagePattern: use this pattern when creating URIs to resources.
        $M=module, $P=path -->
    <!-- inputForward: The "input" parameter on "action" elements is the name of a
         local or global "forward" rather than a module-relative path -->


  <!-- ========== Message Resources Definitions =========================== -->

  <message-resources
    parameter="org.apache.struts.webapp.example.ApplicationResources"/>

  <message-resources
    parameter="org.apache.struts.webapp.example.AlternateApplicationResources"
    key="alternate"/>


  <!-- ========== Plug Ins Configuration ================================== -->

  <plug-in className="org.apache.struts.plugins.ModuleConfigVerifier"/>

  <plug-in className="org.apache.struts.tiles.TilesPlugin" >
    <set-property
      property="definitions-config"
	  value="/WEB-INF/tiles-defs.xml, /WEB-INF/tiles-tests-defs.xml" />
    <set-property
      property="definitions-parser-validate"
      value="true" />
    <set-property
      property="moduleAware"
      value="true" />
  </plug-in>

</struts-config>
