<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE struts-config PUBLIC
          "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN"
          "http://struts.apache.org/dtds/struts-config_1_2.dtd">

<struts-config>
  <display-name><![CDATA[
     account maintenance
  ]]>
  </display-name>
    <description><![CDATA[
     Allows the updating of users accounts and subscriptions.
  ]]>
  </description>

  <!-- ========== Form Bean Definitions =================================== -->
  <form-beans>

    <!-- Logon form bean -->
    <form-bean       name="LogonForm"
                     type="org.apache.struts.validator.DynaValidatorForm">
      <form-property name="username" type="java.lang.String"/>
      <form-property name="password" type="java.lang.String"/>
    </form-bean>

    <!-- Subscription form bean -->
    <form-bean      name="SubscriptionForm"
                    type="org.apache.struts.webapp.example.SubscriptionForm"/>
    </form-beans>


  <!-- ========== Global Forward Definitions ============================== -->
  <global-forwards>
    <forward   name="start"              path="/Start.do"/>
    <forward   name="personview"            path="/PersonView.do"/>
    
    <forward   name="welcome"              path="/Welcome.do"/>
    <forward   name="logoff"               path="/Logoff.do"/>
    <forward   name="logon"                path="/Logon.do"/>
    <forward   name="success"              path="/MainMenu.do"/>
  </global-forwards>


  <!-- ========== Action Mapping Definitions ============================== -->
  <action-mappings>

      <!-- Signet start page -->
      <action    path="/Start"
                 type="edu.internet2.middleware.signet.ui.StartAction">
          <forward name="failure" path="/error.jsp" />
          <forward name="success" path="/main.jsp" />
      </action>

      <!-- Printable Signet main page -->
      <action    path="/MainPrint"
                 type="edu.internet2.middleware.signet.ui.MainPrintAction">
          <forward name="failure" path="/error.jsp" />
          <forward name="success" path="/main-print.jsp" />
      </action>

      <!-- Signet person-view page -->
      <action    path="/PersonView"
                 type="edu.internet2.middleware.signet.ui.PersonViewAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/error.jsp" />
          <forward name="success" path="/personview.jsp" />
      </action>

      <!-- Printable Signet person-view page -->
      <action    path="/PersonViewPrint"
                 type="edu.internet2.middleware.signet.ui.PersonViewPrintAction">
          <forward name="failure" path="/error.jsp" />
          <forward name="success" path="/personview-print.jsp" />
      </action>

      <!-- Signet function-selection page -->
      <action    path="/Functions"
                 type="edu.internet2.middleware.signet.ui.FunctionsAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/error.jsp" />
          <forward name="success" path="/functions.jsp" />
      </action>

      <!-- Signet scope-selection page -->
      <action    path="/OrgBrowse"
                 type="edu.internet2.middleware.signet.ui.OrgBrowseAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/error.jsp" />
          <forward name="success" path="/org-browse.jsp" />
      </action>

      <!-- Signet conditions-selection page -->
      <action    path="/Conditions"
                 type="edu.internet2.middleware.signet.ui.ConditionsAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/error.jsp" />
          <forward name="success" path="/conditions.jsp" />
      </action>

      <!-- Signet grant-confirmation page -->
      <action    path="/Confirm"
                 type="edu.internet2.middleware.signet.ui.ConfirmAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/error.jsp" />
          <forward name="success" path="/confirm.jsp" />
          <forward name="duplicateAssignments" path="/duplicateAssignments.jsp" />
      </action>

      <!-- Signet assignment-details page -->
      <action    path="/Assignment"
                 type="edu.internet2.middleware.signet.ui.AssignmentAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/error.jsp" />
          <forward name="success" path="/assignment.jsp" />
      </action>

      <!-- Signet assignment-revocation action -->
      <action    path="/Revoke"
                 type="edu.internet2.middleware.signet.ui.RevokeAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/error.jsp" />
          <forward name="success" path="/personview.jsp" />
      </action>

      <!-- Signet assignment-revocation-and-grant action
		   (for resolving duplicate Assignments)
       -->
      <action    path="/RevokeAndGrant"
                 type="edu.internet2.middleware.signet.ui.RevokeAndGrantAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/error.jsp" />
          <forward name="success" path="/confirm.jsp" />
      </action>

      <!-- Signet page for display of raw Privileges XML
       -->
      <action    path="/PrivilegesXML"
                 type="edu.internet2.middleware.signet.ui.PrivilegesXMLAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/error.jsp" />
          <forward name="success" path="/privilegesXML" />
      </action>

      <!-- Signet not-yet-implemented page -->
      <action    path="/NotYetImplemented"
                 type="edu.internet2.middleware.signet.ui.NotYetImplementedAction">
          <forward name="notInitialized" path="/Start.do" />
          <forward name="failure" path="/error.jsp" />
          <forward name="success" path="/not-yet-implemented.jsp" />
      </action>
      
      
      

      <!-- Display welcome page -->
      <action    path="/Welcome"
                 type="org.apache.struts.webapp.example.WelcomeAction">
          <forward name="failure" path="/error.jsp" />
          <forward name="success" path="/welcome.jsp" />
      </action>

      <!-- Change locale action -->
      <action
          path="/Locale"
          type="org.apache.struts.webapp.example.LocaleAction"
          parameter="welcome" />

      <!-- Display registration page -->
      <action    path="/Registration"
                 forward="/registration.jsp"/>

      <!-- Display logon page -->
      <action    path="/MainMenu"
                 forward="/mainMenu.jsp"/>

      <!-- Display logon page -->
      <action    path="/Logon"
                 forward="/logon.jsp"/>

       <!-- Process a user logon -->
       <action    path="/SubmitLogon"
                  type="org.apache.struts.webapp.example.LogonAction"
                  name="LogonForm"
                 scope="request"
                 input="logon">
         <exception
                   key="expired.password"
                  type="org.apache.struts.webapp.example.ExpiredPasswordException"
                  path="/ExpiredPassword.do"/>
       </action>

      <!-- Process a user logoff -->
       <action    path="/Logoff"
                  type="org.apache.struts.webapp.example.LogoffAction">
         <forward name="success"              path="/Welcome.do"/>
       </action>

      <!-- Edit mail subscription -->
      <action    path="/EditSubscription"
                 type="org.apache.struts.webapp.example.EditSubscriptionAction"
                 name="SubscriptionForm"
                scope="request"
             validate="false">
        <forward name="failure"              path="/MainMenu.do"/>
        <forward name="success"              path="/subscription.jsp"/>
      </action>

       <!-- Save mail subscription -->
       <action    path="/SaveSubscription"
                  type="org.apache.struts.webapp.example.SaveSubscriptionAction"
                  name="SubscriptionForm"
                 scope="request"
                 input="subscription">
         <forward name="subscription"    path="/subscription.jsp"/>
         <forward name="success"         path="/EditRegistration.do?action=Edit"/>
       </action>

      <!-- Display the change password page when a password expires -->
      <action    path="/ExpiredPassword"
              forward="/changePassword.jsp">
      </action>

      <!-- Display the "walking tour" documentation -->
      <action    path="/Tour"
              forward="/tour.html">
      </action>

  </action-mappings>

  <!-- ========== Controller Configuration ================================ -->

  <controller pagePattern="$M$P" inputForward="true" />
    <!-- pagePattern: use this pattern when creating URIs to resources.
        $M=module, $P=path -->
    <!-- inputForward: The "input" parameter on "action" elements is the name of a
         local or global "forward" rather than a module-relative path -->


  <!-- ========== Message Resources Definitions =========================== -->

  <message-resources
    parameter="org.apache.struts.webapp.example.ApplicationResources"/>

  <message-resources
    parameter="org.apache.struts.webapp.example.AlternateApplicationResources"
    key="alternate"/>


  <!-- ========== Plug Ins Configuration ================================== -->

  <plug-in className="org.apache.struts.plugins.ModuleConfigVerifier"/>

  <plug-in className="org.apache.struts.tiles.TilesPlugin" >
    <set-property
      property="definitions-config"
	  value="/WEB-INF/tiles-defs.xml, /WEB-INF/tiles-tests-defs.xml" />
    <set-property
      property="definitions-parser-validate"
      value="true" />
    <set-property
      property="moduleAware"
      value="true" />
  </plug-in>

</struts-config>
