<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Configuring the Grouper UI from CVS</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>

<body>
<h1>Configuring the Grouper UI from CVS</h1>
<p>This document assumes that you have already downloaded, built and deployed* 
  a Grouper instance (see <a href="file:///C|/projects/GrouperComplete/grouper/doc">Release 
  documentation for the Grouper API</a>). In addition, it is assumed that you 
  have populated the default Subject database or configured the LDAP Subject provider, 
  or configured your own Subject provider, so that one or more users can authenticate 
  themselves to the UI and start Grouper sessions. A subject with id=GrouperSystem 
  should be made available.</p>
<p>*The Grouper UI makes the following assumptions about the Grouper deployment 
  configured through the <font face="Courier New, Courier, mono">grouper.folder</font> 
  property (see <a href="#buildingtheui">Building the UI</a> below):</p>
<ol>
  <li><font face="Courier New, Courier, mono">&lt;grouper.folder&gt;/conf</font> 
    contains the required Grouper configuration files</li>
  <li>You have run '<font face="Courier New, Courier, mono">ant dist</font>' such 
    that <font face="Courier New, Courier, mono">&lt;grouper.folder&gt;/dist/lib</font> 
    contains <font face="Courier New, Courier, mono">Grouper.jar</font> </li>
  <li>One of the following is true 
    <ol>
      <li>You have run '<font face="Courier New, Courier, mono">ant dist-lib</font>' 
        such that <font face="Courier New, Courier, mono">&lt;grouper.folder&gt;/dist/lib</font> 
        contains <font face="Courier New, Courier, mono">Grouper-lib.jar</font>, 
        or</li>
      <li><font face="Courier New, Courier, mono">&lt;grouper.folder&gt;/java/lib</font> 
        contains the third-party JAR files supplied with Grouper, or</li>
      <li><font face="Courier New, Courier, mono">&lt;grouper.folder&gt;/dist/lib,</font>contains 
        the third-party JAR files supplied with Grouper </li>
    </ol>
  </li>
</ol>
<p>This document also assumes you are familiar with Tomcat (available from <a href="http://jakarta.apache.org/tomcat/">jakarta.apache.org/tomcat</a>). 
</p>
<h2>Preparing Tomcat</h2>
<p>The Grouper UI requires that users authenticate themselves. By default, the 
  UI, relies upon basic HTTP authentication which in turn depends on appropriate 
  configuration of Tomcat. </p>
<p>If you want to use Tomcat's default authentication mechanism (based on <font face="Courier New, Courier, mono">&lt;TOMCAT_HOME&gt;/conf/tomcat-users.xml)</font>. 
</p>
<ol>
  <li>Open <font face="Courier New, Courier, mono">grouper-ui/tomcat-users.xml</font> 
    and copy the lines inside the <font face="Courier New, Courier, mono">&lt;tomcat-users&gt;</font> 
    tags to the <font face="Courier New, Courier, mono">tomcat-users.xml</font> 
    file for your Tomcat installation. You may also add other users*.</li>
  <li>Restart Tomcat.</li>
</ol>
<p>*The UI attempts to retrieve a Subject using the<font face="Courier New, Courier, mono"> 
  Source.getSubjectByIdentifier(String identifier)</font> method. The username 
  configured for Tomcat is passed as the <font face="Courier New, Courier, mono">identifie</font>r.</p>
<p>See <a href="customising-grouper-ui.html#Customisin">Customising authentication</a> 
  for information on how authentication works and two** examples of alternative 
  authentication schemes.</p>
<p>**The first example is based on the custom UI which is provided as part of 
  the QuickStart distribution.</p>
<h2 id="buildingtheui">Building the UI</h2>
<p>You must have <a href="http://ant.apache.org/">Ant</a> installed and available 
  on your path.</p>
<p>Copy <font face="Courier New, Courier, mono">grouper-ui/build.properties.template</font> 
  to <font face="Courier New, Courier, mono">grouper-ui/build.properties</font>.</p>
<p>Review <font face="Courier New, Courier, mono">grouper-ui/build.properties</font>. 
  If you want the build script to automatically install the UI in your Tomcat 
  instance uncomment and set the appropriate value for <font face="Courier New, Courier, mono">deploy.home</font>. 
  If you do not set this you will need to copy the UI to your Tomcat installation's 
  webapps directory. You will probably want to define the <font face="Courier New, Courier, mono">default.webapp.folde</font>r 
  to suit how you intend to develop / customise the UI. See <a href="environment.html">Grouper 
  UI Development Environment </a> for options.</p>
<p>Make sure you set the <font face="Courier New, Courier, mono">grouper.folder</font> 
  property to the location of your Grouper installation. </p>
<p>Copy <font face="Courier New, Courier, mono">grouper-ui/template-tomcat-context.xml</font> 
  to <font face="Courier New, Courier, mono">grouper-ui/tomcat-context.xml</font> 
  (or the value of the property <font face="Courier New, Courier, mono">deploy.context.xml</font> 
  if you have changed this).</p>
<p>Tomcat specific configuration can be added in this file e.g. container managed 
  datasources. </p>
<p>Change directory to<font face="Courier New, Courier, mono"> grouper-ui</font> 
  and type <font face="Courier New, Courier, mono">ant</font>. </p>
<p>A list of build targets* is displayed. If you have set <font face="Courier New, Courier, mono">deploy.home</font> 
  enter <font face="Courier New, Courier, mono">default</font>. Otherwise type 
  <font face="Courier New, Courier, mono">dist </font>or<font face="Courier New, Courier, mono"> 
  war</font>. If the former copy <font face="Courier New, Courier, mono">&lt;dist.home&gt;/grouper</font> 
  to <font face="Courier New, Courier, mono">&lt;TOMCAT_HOME&gt;/webapps</font>, 
  or, if the latter, copy <font face="Courier New, Courier, mono">&lt;dist.home&gt;/grouper.war</font> 
  to <font face="Courier New, Courier, mono">&lt;TOMCAT_HOME&gt;/webapps</font>.</p>
<p>Using a web browser access the UI e.g.<font face="Courier New, Courier, mono"> 
  http://localhost:8080/grouper</font>. Login as GrouperSystem, or another Subject 
  which can authenticate.</p>
<p>*If you want to take advantage of the 'nice' targets you must uncomment and 
  set appropriate values for all the deploy properties in <font face="Courier New, Courier, mono">grouper-ui/build.properties</font>. 
  In addition you must make <font face="Courier New, Courier, mono">&lt;TOMCAT_HOME&gt;/server/lib/catalina-ant.jar</font> 
  available to ant - add it to your <font face="Courier New, Courier, mono">&lt;ANT_HOME&gt;/lib</font> 
  directory (or see the Ant documentation for other options).</p>
<h2>&nbsp;</h2>
<p>&nbsp;</p>
<h2>&nbsp;</h2>
</body>
</html>
